{
  "version": "1.0.0",
  "description": "Checkpoint guard configuration to prevent false completions",
  
  "phase_requirements": {
    "1.1": {
      "description": "Infrastructure Setup",
      "required_files": [
        "supabase/migrations/001_init.sql",
        "contracts/openapi.yaml",
        ".env.example"
      ],
      "required_directories": [
        "contracts",
        "supabase"
      ]
    },
    
    "1.2": {
      "description": "Core API (Go/Gin)",
      "required_files": [
        "apps/api/main.go",
        "apps/api/go.mod"
      ],
      "required_patterns": [
        "apps/api/**/*.go"
      ],
      "test_command": "cd apps/api && go test ./..."
    },
    
    "1.3": {
      "description": "Orchestrator (LangGraph)",
      "required_files": [
        "apps/orchestrator/package.json",
        "apps/orchestrator/src/graph.ts",
        "apps/orchestrator/src/index.ts"
      ],
      "required_directories": [
        "apps/orchestrator/src/nodes"
      ],
      "test_command": "cd apps/orchestrator && npm test"
    },
    
    "1.4": {
      "description": "Frontend (SvelteKit)",
      "required_files": [
        "apps/web/package.json",
        "apps/web/svelte.config.js",
        "apps/web/vite.config.js"
      ],
      "required_directories": [
        "apps/web/src/routes",
        "apps/web/src/lib"
      ],
      "min_component_count": 5
    },
    
    "1.5": {
      "description": "Integration & Testing",
      "required_files": [
        "docker-compose.yml"
      ],
      "required_directories": [
        "tests/e2e",
        "tests/integration"
      ],
      "test_patterns": [
        "**/*.test.ts",
        "**/*.test.js",
        "**/*.spec.ts"
      ],
      "min_test_count": 10
    },
    
    "1.6": {
      "description": "UI Iteration Safety",
      "required_directories": [
        "apps/web/src/containers",
        "apps/web/src/components",
        "apps/web/src/stores"
      ],
      "required_patterns": [
        "apps/web/src/containers/*.svelte",
        "apps/web/src/components/*.svelte"
      ]
    }
  },
  
  "validation_rules": {
    "prevent_auto_complete": true,
    "require_evidence": true,
    "require_tests": true,
    "max_completion_time_minutes": 30,
    "min_files_per_phase": 3
  },
  
  "error_messages": {
    "no_evidence": "Cannot mark phase as complete - no actual work files found",
    "too_fast": "Phase marked complete in under 30 minutes - likely false positive",
    "missing_tests": "Phase requires passing tests before marking complete",
    "missing_files": "Required files for phase completion not found"
  },
  
  "override_keys": {
    "force_complete": "CHECKPOINT_FORCE_COMPLETE",
    "skip_validation": "CHECKPOINT_SKIP_VALIDATION"
  }
}
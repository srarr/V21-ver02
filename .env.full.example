# Heliox ATLAS v21 - Complete Environment Configuration
# Copy this file to .env and configure the values

# ========== Core Application ==========

# API Gateway Configuration
BACKEND_HTTP_ADDR=http://localhost:8080
FRONTEND_URL=http://localhost:5173
API_VERSION=v1

# Environment
NODE_ENV=development
LOG_LEVEL=debug

# ========== Database Configuration ==========

# PostgreSQL (Primary Database)
POSTGRES_DSN=postgres://postgres:postgres@localhost:5432/heliox?sslmode=disable
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DATABASE=heliox

# Database Pool Settings
DB_MAX_CONNECTIONS=20
DB_IDLE_TIMEOUT_SECONDS=300
DB_MAX_LIFETIME_SECONDS=3600

# ========== Message Queue ==========

# NATS Configuration
NATS_URL=nats://localhost:4222
NATS_CLUSTER_ID=heliox-cluster
NATS_CLIENT_ID=heliox-api
NATS_MAX_RECONNECTS=5
NATS_RECONNECT_WAIT_SECONDS=2

# Event Streaming
EVENTS_STREAM_NAME=heliox.events
EVENTS_MAX_AGE_HOURS=24
EVENTS_MAX_MSGS=10000

# ========== Object Storage ==========

# MinIO/S3 Configuration
MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_USE_SSL=false
MINIO_REGION=us-east-1

# Storage Buckets
HSP_BUCKET_NAME=heliox-hsp
ARTIFACTS_BUCKET_NAME=heliox-artifacts
BACKUPS_BUCKET_NAME=heliox-backups

# ========== LLM Services ==========

# Anthropic Claude (Primary)
ANTHROPIC_API_KEY=sk-ant-your-key-here
ANTHROPIC_MODEL=claude-3-opus-20240229
ANTHROPIC_MAX_TOKENS=4096
ANTHROPIC_TEMPERATURE=0.7
ANTHROPIC_TIMEOUT_SECONDS=120

# OpenAI GPT (Fallback)
OPENAI_API_KEY=sk-your-key-here
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_MAX_TOKENS=4096
OPENAI_TEMPERATURE=0.7
OPENAI_TIMEOUT_SECONDS=120

# Ollama (Local Development)
OLLAMA_URL=http://localhost:11434
OLLAMA_MODEL=llama2
OLLAMA_TIMEOUT_SECONDS=300

# LLM Strategy
LLM_PRIMARY_PROVIDER=anthropic
LLM_FALLBACK_PROVIDER=openai
LLM_LOCAL_PROVIDER=ollama
LLM_RETRY_ATTEMPTS=3
LLM_RETRY_DELAY_SECONDS=5

# ========== Market Data ==========

# Yahoo Finance (Primary)
YAHOO_FINANCE_API_URL=https://query1.finance.yahoo.com
YAHOO_FINANCE_TIMEOUT_SECONDS=30
YAHOO_FINANCE_RATE_LIMIT_PER_MINUTE=2000

# Alpha Vantage (Backup)
ALPHA_VANTAGE_API_KEY=your-alpha-vantage-key
ALPHA_VANTAGE_BASE_URL=https://www.alphavantage.co
ALPHA_VANTAGE_TIMEOUT_SECONDS=30
ALPHA_VANTAGE_RATE_LIMIT_PER_MINUTE=75

# Data Cache Settings
MARKET_DATA_CACHE_TTL_MINUTES=60
MARKET_DATA_ENABLE_CACHE=true

# ========== Broker Configuration ==========

# OANDA (Forex/CFD)
OANDA_API_KEY=your-oanda-api-key
OANDA_ACCOUNT_ID=your-oanda-account-id
OANDA_ENVIRONMENT=practice
# Options: practice, live
OANDA_BASE_URL=https://api-fxpractice.oanda.com

# Binance (Crypto)
BINANCE_API_KEY=your-binance-api-key
BINANCE_SECRET_KEY=your-binance-secret-key
BINANCE_TESTNET=true
BINANCE_BASE_URL=https://testnet.binance.vision
# For live trading: https://api.binance.com

# Paper Trading
PAPER_TRADING_INITIAL_BALANCE=100000
PAPER_TRADING_COMMISSION_RATE=0.001
PAPER_TRADING_SLIPPAGE_BPS=5

# ========== Security & Auth ==========

# JWT Configuration
JWT_SECRET=your-very-secure-jwt-secret-key-change-this-in-production
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d

# API Keys and Authentication
API_KEY_SALT=your-api-key-salt-change-this
API_RATE_LIMIT_PER_MINUTE=1000
API_RATE_LIMIT_BURST=100

# CORS Settings
CORS_ORIGINS=http://localhost:5173,http://localhost:3000
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_HEADERS=Content-Type,Authorization,X-Trace-ID

# ========== Monitoring & Observability ==========

# Logging
LOG_FORMAT=json
LOG_FILE=logs/heliox.log
LOG_MAX_SIZE_MB=100
LOG_MAX_BACKUPS=10
LOG_MAX_AGE_DAYS=30

# Metrics and Monitoring
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_PATH=/metrics

# Health Checks
HEALTH_CHECK_INTERVAL_SECONDS=30
HEALTH_CHECK_TIMEOUT_SECONDS=10

# Tracing (Optional - for distributed tracing)
# JAEGER_AGENT_HOST=localhost
# JAEGER_AGENT_PORT=6831
# JAEGER_SERVICE_NAME=heliox-api

# ========== Performance & Limits ==========

# Request Limits
MAX_REQUEST_SIZE_MB=10
MAX_UPLOAD_SIZE_MB=100
REQUEST_TIMEOUT_SECONDS=300

# Concurrent Processing
MAX_CONCURRENT_RUNS=10
MAX_CONCURRENT_BACKTESTS=5
WORKER_POOL_SIZE=20

# Cache Settings
REDIS_URL=redis://localhost:6379/0
REDIS_PASSWORD=
REDIS_DB=0
CACHE_DEFAULT_TTL_SECONDS=3600

# ========== Development & Testing ==========

# Development Features
ENABLE_DEBUG_ROUTES=true
ENABLE_MOCK_BROKERS=true
ENABLE_SEED_DATA=true
ENABLE_SWAGGER_UI=true

# Testing
TEST_DATABASE_URL=postgres://postgres:postgres@localhost:5432/heliox_test?sslmode=disable
TEST_TIMEOUT_SECONDS=30
TEST_PARALLEL_WORKERS=4

# Feature Flags
FEATURE_REAL_TIME_STREAMING=true
FEATURE_ADVANCED_CHARTS=true
FEATURE_PORTFOLIO_OPTIMIZATION=false
FEATURE_SOCIAL_TRADING=false

# ========== Deployment & Infrastructure ==========

# Docker/Container Settings
CONTAINER_NAME=heliox-api
CONTAINER_PORT=8080
CONTAINER_MEMORY_LIMIT=2g

# Health Check URLs (for load balancers)
HEALTH_CHECK_URL=/health
READINESS_CHECK_URL=/ready
LIVENESS_CHECK_URL=/alive

# ========== Backup & Recovery ==========

# Database Backup
DB_BACKUP_ENABLED=true
DB_BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
DB_BACKUP_RETENTION_DAYS=30
DB_BACKUP_S3_BUCKET=heliox-db-backups

# Application Backup
APP_BACKUP_ENABLED=true
APP_BACKUP_INCLUDE_LOGS=false
APP_BACKUP_COMPRESSION=gzip

# ========== Third-party Services ==========

# Email Service (for notifications)
# SENDGRID_API_KEY=your-sendgrid-key
# EMAIL_FROM=noreply@heliox.com
# EMAIL_REPLY_TO=support@heliox.com

# SMS Service (for alerts)
# TWILIO_ACCOUNT_SID=your-twilio-sid
# TWILIO_AUTH_TOKEN=your-twilio-token
# TWILIO_PHONE_FROM=+1234567890

# Error Tracking
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
# SENTRY_ENVIRONMENT=development
# SENTRY_SAMPLE_RATE=1.0

# Analytics (Optional)
# GOOGLE_ANALYTICS_ID=G-XXXXXXXXXX
# MIXPANEL_TOKEN=your-mixpanel-token

# ========== Custom Application Settings ==========

# Strategy Generation
STRATEGY_MAX_COMPLEXITY=8
STRATEGY_DEFAULT_RISK_TIER=balanced
STRATEGY_MAX_ASSETS=10
STRATEGY_MAX_INDICATORS=15

# Backtesting
BACKTEST_MAX_YEARS=10
BACKTEST_MIN_TRADES=10
BACKTEST_DEFAULT_CAPITAL=100000
BACKTEST_MAX_CONCURRENT=3

# Portfolio Management
PORTFOLIO_MAX_ASSETS=50
PORTFOLIO_MIN_ALLOCATION=0.01  # 1%
PORTFOLIO_MAX_SINGLE_ALLOCATION=0.5  # 50%
PORTFOLIO_REBALANCE_THRESHOLD=0.05  # 5%

# Risk Management
RISK_MAX_DAILY_LOSS=0.05  # 5%
RISK_MAX_PORTFOLIO_DRAWDOWN=0.2  # 20%
RISK_POSITION_SIZING_MODEL=fixed_fractional
RISK_DEFAULT_STOP_LOSS=0.02  # 2%

# ========== Environment Specific Overrides ==========

# Development Overrides
# DEV_SKIP_AUTH=true
# DEV_MOCK_MARKET_DATA=true
# DEV_FAST_BACKTEST=true

# Staging Overrides
# STAGING_USE_MOCK_BROKERS=true
# STAGING_REDUCED_RATE_LIMITS=true

# Production Overrides (Security)
# PROD_ENFORCE_HTTPS=true
# PROD_STRICT_CORS=true
# PROD_REQUIRE_API_KEY=true

# ========== Notes ==========

# 1. Change all default passwords and secrets in production
# 2. Use environment-specific values for different deployments
# 3. Keep sensitive values (API keys, passwords) secure
# 4. Review and update rate limits based on your usage
# 5. Enable monitoring and logging in production
# 6. Configure backups and disaster recovery
# 7. Test all integrations in staging environment first
# 8. Document any custom environment variables you add

# ========== Validation ==========

# Uncomment to enforce required variables
# REQUIRE_LLM_API_KEY=true
# REQUIRE_DATABASE_CONNECTION=true
# REQUIRE_STORAGE_CONFIG=true